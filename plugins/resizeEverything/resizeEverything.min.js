!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){e.fn.resizableSafe||(e.fn.resizableSafe=function n(i){var a={handleSelector:null,resizeWidth:!0,resizeHeight:!1,resizeWidthFrom:"right",resizeHeightFrom:"bottom",onDragStart:null,onDragEnd:null,onDrag:null,touchActionNone:!0,instanceId:null,eventMinWidth:4,redrawFunc:null,resizeStep:4};return"object"==typeof i&&(a=e.extend(a,i)),this.each(function(){var n,l,o,r,s,c,d,u,f,p,h,g,m=e.extend({},a);m.instanceId||(m.instanceId="rsz_"+new Date().getTime());var y=null,v=null,w=null;y=i.resizeStep?i.resizeStep:a.resizeStep;var D=e(this);let $=JSON.parse(e(D.find(".EventDetail")).data("data"));if(!(new Date($.end).getTime()<new Date().getTime())){var b="";e(D).append('<div class="stickR"></div>'),e(D).append('<div class="stickL"></div>');var z=W(D),S=N(D),x=0,I=0,L=0,_=null,T=null;if(z.on("mousedown."+m.instanceId,X),S.on("mousedown."+m.instanceId,X),"destroy"===i){if(!(m=D.data("resizable")))return;(l=N(D)).off("mousedown."+m.instanceId+" touchstart."+m.instanceId),m.touchActionNone&&l.css("touch-action",""),(o=W(D)).off("mousedown."+m.instanceId+" touchstart."+m.instanceId),m.touchActionNone&&o.css("touch-action",""),l=document.getElement,D.removeClass("resizable");return}D.data("resizable",m),l=N(D),o=W(D),m.touchActionNone&&(l.css("touch-action","none"),o.css("touch-action","none")),D.addClass("resizable")}function X(t){var a;b=t.target.className,t.preventDefault(),w=v=e(".ScheduleDay").width()/24*y,x=parseFloat(D.width()),d=parseFloat(D.width()),I=Number(e(D).css("left").replace("px","")),L=t.pageX,f=t.pageX,function t(){let n=e(".ScheduleDay").width();c=n*i.eventMinWidth/24;let a=e(D).parent(),l=e(a).parent(),o=e(l).children(),d=e(a).attr("childnumber"),u=0;for(let f=1;f<d;f++)u++;let p=n*o.length,h=u*n;r=x+h+I,s=p-h-I}(),e(document).on("mousemove."+m.instanceId,k),e(document).on("mouseup."+m.instanceId,E);let l,o,p,$,z,S=(a=b,l=e(D).find(".EventDetail"),_=moment((n=JSON.parse(e(l).data("data"))).start),T=moment(n.end),o=_.toDate().toLocaleString(),p=T.toDate().toLocaleString(),$=document.createElement("div"),$.id="resizeTempTimeLabel",$.style.marginLeft="7px",$.style.padding="15px",$.style.backgroundColor="rgb(44, 44, 44)",$.style.display="flex",$.style.justifyContent="center",$.style.alignItems="center",$.style.position="absolute",$.style.zIndex="3000",$.style.opacity="0.8",z=document.createElement("div"),z.style.color="white",z.style.fontWeight="bold",z.style.fontSize="14px",z.innerText="stickL"===a?o:p,e($).append(z),$);if(document.body.appendChild(S),u=1.3*e(S).width(),e(S).css("left",t.clientX+"px").css("top",t.clientY-80+"px"),h=e(D).width(),g=100*e(D).css("left").slice(0,-2)/e(".ScheduleDay").width(),"stickL"===b&&e(S).css("left",t.clientX-u+"px"),m.onDragStart&&!1===m.onDragStart(t,D,m))return}function k(t){if(-1!==b.indexOf("stickL")){let n=x-(t.pageX-L),i=f>t.pageX?"l":"r";if(F(p,i)&&(w=v,x=n,L=t.pageX,I=Number(e(D).css("left").replace("px",""))),f=t.pageX,p=i,n>=c&&n<=r&&Math.abs(x-n)>w){let a=100*n/e(".ScheduleDay").width(),l=100*I/e(".ScheduleDay").width(),o;o=0===I?100*(o=I+(t.pageX-L))/e(".ScheduleDay").width():(I+(t.pageX-L))*l/I,D[0].style.width=a+"%",D[0].style.left=o+"%",C("l",i),e("#resizeTempTimeLabel").css("left",t.clientX-u+"px"),w+=v}}else if(-1!==b.indexOf("stickR")){let h=x+(t.pageX-L),g=h>d?"r":"l";if(F(p,g)&&(w=v,x=h,L=t.pageX,h=x+(t.pageX-L)),p=g,d=h,h>=c&&h<=s&&Math.abs(x-h)>w){let y;y="r"===g?100*(x+w)/e(".ScheduleDay").width():100*(x-w)/e(".ScheduleDay").width(),D[0].style.width=y+"%",C("r",g),e("#resizeTempTimeLabel").css("left",t.clientX+"px"),w+=v}}m.onDrag&&m.onDrag(t)}function E(t){t.stopPropagation(),t.preventDefault(),e(document).off("mousemove."+m.instanceId),e(document).off("mouseup."+m.instanceId),window.removeEventListener("mousemove."+m.instanceId,k),e("#resizeTempTimeLabel").remove();let a=j(_.toDate().toLocaleString()),l=j(T.toDate().toLocaleString());if(moment(a).isBefore(moment())){e(D).width(h),e(D).css("left",g+"%"),i.redrawFunc&&i.redrawFunc(n.locationId,null);return}let o={startDate:moment(a),endDate:moment(l),eventId:n.id};i.redrawFunc&&i.redrawFunc(n.locationId,o),m.onDragEnd&&m.onDragEnd(o)}function F(e,n){return e!==n&&null!==e&&e!==t}function j(e){let t=e.split(/[.,: ]+/);return new Date(t[2],t[1]-1,t[0],t[3],t[4])}function C(t,n){"l"===t?("r"===n?_=moment(_).add(y,"hour"):"l"===n&&(_=moment(_).add(-1*y,"hour")),e("#resizeTempTimeLabel div").text(_.toDate().toLocaleString())):"r"===t&&("r"===n?T=moment(T).add(y,"hour"):"l"===n&&(T=moment(T).add(-1*y,"hour")),e("#resizeTempTimeLabel div").text(T.toDate().toLocaleString()))}function N(e){return e.find(".stickR")}function W(e){return e.find(".stickL")}})},e.fn.resizable||(e.fn.resizable=e.fn.resizableSafe))});